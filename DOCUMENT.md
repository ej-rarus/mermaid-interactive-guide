# MISTO POS 기능정의서 (MVP)

## 0\. 문서 정보
**문서명**: MISTO POS v1.1 기능정의서 (MVP)
**프로젝트**: MISTO 매장용 POS 시스템
**작성일**: 2025-12-03
**작성자**: 이은재
**검토자(내부)**: 이동욱
**검토자(고객사)**: MISTO

* * *
## 1\. 시스템 개요
### 1.1 목적
매장 직원이 제품 판매/환불/일마감 업무를 POS 한 화면에서 처리할 수 있도록 하는 데스크톱 기반 웹 POS 시스템.
초기 버전(MVP)에서는 단일 매장 기준의 기본 판매·정산 기능에 집중하고, 복잡한 재고/본사 연동 등은 후속 단계에서 고려한다.
### 1.2 범위 (MVP)

**포함**:
*   상품 검색 및 장바구니 관리
*   회원 조회 및 회원 정보 표시
*   프로모션(행사) 적용/해제
*   결제 금액 요약 및 결제 수단 선택
*   결제 처리(수납 금액/거스름돈 입력)
*   주문 목록 조회 및 환불 처리(기본)
*   일일 영업 시작/종료(Day Open / Day Close)
*   Daily Receipt 출력
*   다중 결제수단 관리 (현금, VISA, MASTER CARD, ALIPAY 등)
*   영수증 프린터와 카드 단말기 통신
*   쿠폰 시스템
*   환불 부분 환불 상세 로직

**연동항목**
*   재고 관리 전체 프로세스(입고/이동/조정 등)
*   본사 시스템과의 연동 규격 상세(ERP, 재고 시스템 API 등)

**제외 (Out of Scope, 추후 논의)**:
*   멤버십 가입/수정
*   멀티 매장 관리
* * *
##   

## 2\. 사용자 역할

### 점원 (Cashier) 역할 정의

**점원의 주요 권한**:
*   판매, 결제, 주문 조회, 환불 요청, Daily Receipt 출력
*   Day Open / Day Close 수행
*   Day Open / Day Close 결과 확인 및 수정
*   Products 장바구니 관리 (추가/수정/삭제)
*   회원 정보 조회
*   Promotion 토글 ON/OFF
*   여러 결제수단으로 결제 처리
*   환불 승인, 금액 차이(오버/쇼티지) 확인 및 승인
*   임직원 구매한도 초과일시 승인 (한도 구매금액만큼만 적용)
*   Selling Price 수정
*   시스템 설정 변경

**⚠️ 확인 필요**:
- [ ] 점원과 점장 역할 구분이 필요한가? (현재는 단일 역할로 통일)
- [ ] 점원이 시스템 설정을 변경해도 되는가? (현재는 모든 점원이 설정 변경 가능)
- [ ] 임직원 구매관련 정책 요청 (구매한도, 할인율, 대상자 범위 등)


## 3\. 주요 업무 플로우
### 3.1 Day Open / Day Close
#### 3.1.1 Day Open (영업 시작)
1. Day Open 버튼 클릭
2. 팝업에서:
    *   "Load Previous Day Closing Balance" 버튼으로 전일 마감액 자동 불러오기 OR
    *   수동으로 금일 시작 금액 입력
3. 결제수단별 시작 잔액 설정
4. Confirm 버튼 → Day Open 완료
5. 완료 후 판매 기능 활성화

**비즈니스 규칙**:
*   **하루에 Day Open은 1회만 허용**
*   Day Open 완료 전에는 **판매 기능 제한** (필수)
*   Day Open 완료 시 현재 시간 자동 기록
*   Last Initialized Open Time 표시로 마지막 오픈 시간 확인 가능

**⚠️ Day Open 정책 확인 필요**:
- [ ] Day Open 재수정이 가능한가? (현재: 1회만 허용, 추가 수정 불가 기본 정책)
- [ ] 복수 Day Open 허용 여부 (하루에 여러 번 Open/Close 가능한지)

#### 3.1.2 Day Close (영업 종료 및 정산)
1. Day Close 버튼 클릭 (Day Open 완료 후에만 활성화)
2. 팝업에서 결제수단별 실수령 금액 입력:
    *   시스템이 계산한 금액(Day Open Amount + Amount Received) 표시
    *   실제 수금액 입력 (Closing Balance)
    *   자동으로 Over/Short 계산
3. 각 결제수단별 Confirm 체크박스
4. "Proceed to Day Close" 버튼 → Day Close 완료
5. Daily Receipt 팝업(4.10)에서 요약 정보 확인 후 Print

**비즈니스 규칙**:
*   **하루에 Day Close는 1회만 허용**
*   Day Close 완료 후에는 다시 Day Open까지 판매 기능 사용 불가
*   **인출 금액(Closing Balance)은 별도 관리** - 매니저가 지정한 금액만큼 출금 처리
*   Over/Short 금액 차이가 있을 경우 경영 기록용 로그에 저장 (추후 분석용)
*   날짜별 Day Open/Close 히스토리 조회 기능 필요
*   Day Close 완료 이후에만 Daily Receipt 출력 가능

**⚠️ Day Close 정책 확인 필요**:
- [ ] Day Close 재수정 기능 필요한가? (현재: 1회만 허용, 수정 불가)
- [ ] 금액 인출 기능 필요한가? (Day Close시 인출액 추가/수정 가능한지)
- [ ] 지난 Open/Close 히스토리 조회 기능 필요한가? (날짜별 과거 기록 조회 가능한지)

### 3.2 판매 프로세스
#### 3.2.1 상품 추가
**바코드 스캐닝 방식**:
1. **상품 바코드 스캐닝** → 해당 상품을 Products 그리드에 추가
2. **입력창 활성화 불필요** - 바코드 스캔 시 자동 인식 (전역 리스너)
3. **검색 결과 없음 시나리오**:
   - 상품 바코드: 없음 → 주문 바코드(영수증) 검색 시도 → 없으면 경고 메시지 팝업

**수동 입력 방식**:
*   "Search Product" 입력 → Product 팝업(4.5) 노출 → 상품 선택 → Products 그리드에 라인 추가


#### 3.2.2 상품 정보 수정
*   **QTY**: - / + 버튼으로 증감 또는 직접 입력 가능
*   **Selling Price**: Selling Price 직접 수정 가능
*   **Size / Color**: 상품 옵션 정보 표시 (수정 불가)
*   **Original Price**: 상품 마스터에서 관리되는 정상가 (수정 불가)
*   **Amount**: QTY × Selling Price로 자동 계산

**회원 가입**
    *   Members에 회원가입 버튼 배치
    *   회원명, 연락처, 임직원 여부 입력
    *   (인증 필요여부 확인)
    *   회원번호, 회원 등급 자동 부여 (수정도 가능)
**회원 검색/선택**
    *   검색 입력 → 돋보기 버튼 클릭 → 회원 검색 API 호출
    *   Members 영역에 회원정보 표시
    *   임직원 사원판매 토글 ON → 임직원 전용 프로모션/한도 정책 적용

**⚠️ Selling Price 수정 권한 확인 필요**:
- [ ] 점원이 Selling Price를 직접 수정해도 되는가?

#### 3.2.3 Promotion 적용
*   상세한 Promotion 정책은 별도 섹션 참조 (섹션 3.6)
*   Promotion 영역에서 캠페인 토글 ON/OFF
*   Promotion 추가/초기화 기능
*   Payment Summary에 할인 금액 반영

#### 3.2.4 결제
**단일 결제**:
    *   Select Payment에서 결제 수단 선택 (CASH / VISA / MASTER CARD / ALIPAY)
    *   Pay 버튼 클릭 → Pay 팝업(4.7) 진입
    *   수납 금액 입력 → 거스름돈 자동 계산 → Confirm
    *   결제 완료

**복합 결제 (Multiple Payment Methods)**:
    *   Grand Total을 여러 결제수단으로 분할 결제 가능
    *   첫 번째 결제수단 선택 → 결제액 입력
    *   "추가 결제" 버튼으로 두 번째 결제수단 추가
    *   각 결제수단별 수납 금액 입력 (합계 = Grand Total)
    *   모든 결제 입력 완료 후 최종 Confirm
    *   거스름돈은 마지막 결제수단에서 처리

### 3.3 주문 조회 및 환불

#### 3.3.1 주문 조회 (View Orders)
1. View Orders 팝업 클릭
2. 팝업에서 조건 검색:
    *   날짜 범위 (From ~ To)
    *   회원명/번호
    *   금액 범위
    *   상태 (결제완료/반품완료/임시저장)
    *   점원명/코드
    *   영수증 번호
3. 주문 리스트 조회
4. 리스트에서 **View 버튼** 클릭 → 주문 상세 정보 확인
    *   선택한 주문의 모든 정보 표시 (상품, 수량, 가격, 결제수단, 회원정보 등)
    *   상세 정보 팝업 또는 별도 화면에서 읽기 전용 형태로 표시

5. 리스트에서 **Copy 버튼** 클릭 → 기존 주문 복사하여 신규 주문 생성
    *   선택한 주문의 상품, 수량, 회원정보, 적용된 프로모션 정보가 모두 복사됨
    *   POS 메인 화면으로 돌아가며 복사된 정보로 신규 주문 로드
    *   점원이 필요시 상품 수정, 수량 변경 후 새로운 주문으로 결제 처리 가능

6. 리스트에서 **Refund 버튼** 클릭 → 환불 프로세스 진입
    *   환불 팝업 호출
    *   상세 환불 정책은 3.3.2 (환불 프로세스) 참조

7. 리스트에서 **Remove 버튼** 클릭 → 주문 삭제
    *   **임시 저장 상태**에서만 삭제 가능
    *   **결제 완료 상태**에서는 Remove 버튼 비활성화 (환불 처리로 대신함)

#### 3.3.2 환불 (Refund Process)
**환불 트리거**: View Orders 팝업에서 "Refund" 버튼 클릭

**환불 정책 상세**:

**1. 환불 타입**:
   - **즉시 환불**: 바로 취소 처리
   - **이후 환불**: 지정된 기간 후 취소 처리
   - **분기 조건 (시나리오별로 고객사와 확인 필요)**:
     - [ ] 즉시 환불이 발생하는 조건 (예: 당일 주문, 특정 상품 등)
     - [ ] 이후 환불이 발생하는 조건
     - [ ] 각 조건별 처리 기한

**2. 결제수단별 환불 처리**:
   - **현금**: 점원이 즉시 현금 반환
   - **카드**: 카드사 승인 취소 또는 환급 처리
   - **복합 결제**: 각 결제수단별로 분리 처리

**3. 환불 시나리오**:
   - **교환의 경우**: 기존 주문 환불 → 신규 주문 생성
   - **반품/취소의 경우**: 주문 전체/부분 환불
   - **영수증 미제시 경우**: 점원/매니저 확인 후 환불 승인

**4. 환불 가능 기간**:
   - **기본값**: 발행일로부터 365일 이내 환불 가능
   - **고객사 정책 확인 필요**:
     - [ ] 환불 가능 기간 제한 여부 (제한 없음 vs 제한 있음)
     - [ ] 제한이 있다면 구체적인 기간 (예: N일, N개월)
     - [ ] 기간 경과 후 환불 요청 시 처리 방식

**5. 마이너스 거래(Negative Transaction) 처리 정책**:
   - **문제 상황**: Shopify는 마이너스 거래를 지원하지 않음
   - **해결 방안**:
     - Shopify에는 **0 거래(Zero Transaction)로 기록**
     - **별도 DB(MISTO POS 전용 DB)에 마이너스 거래를 기록**
   - **기록 내용**: 환불 금액, 환불 사유, 환불 시간, 담당자 등
   - **조회 방식**: 별도 DB에서 마이너스 거래 히스토리 조회 가능


### 3.4 Daily Receipt 출력
1. Day Close 완료 후 자동으로 Daily Receipt 팝업 표시
2. 또는 메인 화면 "Daily Receipt" 버튼으로 수동 호출 가능
3. 요약 정보 확인 (점포명, 영업일자, 총 판매액, 결제수단별 매출, Over/Short 등)
4. Print 버튼 → 영수증 프린터로 출력
5. **프린터 연동 및 인출 금액 처리**:
    *   분할 결제/전체 결제 구분 출력
    *   매니저 지정 인출 금액에 따른 별도 기록

### 3.5 로그인 및 초기 접속
**로그인 방식**: **상점별 고정 발급식**
- 각 POS 단말기별로 고정된 계정 할당
- 아이디/패스워드는 고정 발급 방식으로 관리
- 로그인 시 상점 정보 자동 선택 (사용자 재선택 불가)
- 모든 점원/매니저가 동일 계정으로 사용

### 3.6 Promotion 정책 (프로모션 적용 규칙)
**Promotion 유형**:
1. **상품 프로모션**: 특정 상품에 대한 할인 (예: 카테고리 할인)
2. **멤버십 프로모션**: 회원 등급별 할인 (예: VIP 회원 10% 할인)
3. **임직원 프로모션**: 임직원 전용 할인 (예: 임직원 사원판매 ON 시)

**Promotion 중복 적용 정책**:
*   복수 프로모션 동시 적용 여부 (예: 상품할인 5% + 멤버할인 7% 동시 적용 가능?)
*   중복 적용 시 최소값/최대값/합산 기준 결정 필요
*   우선순위 정책 (상위 1개만 적용 vs 모두 적용) 결정 필요

**SET 할인 정책**:
*   특정 상품 조합 구매 시 할인 (예: 상품 A + B 함께 구매 시 10% 할인)
*   세부 정책 (금액, 비율, 조건) 별도 전달 필요

* * *
## 4\. 화면별 기능 정의
### 4.0 공통 UI / 컴포넌트
**공통 컴포넌트 라이브러리**: Icon / Button / Toggle / Radio / Input / Select / Payment Button 등은 디자인 시스템에 따라 공통 컴포넌트로 사용
**공통 규칙**:
*   비활성(Disabled) 상태: 회색/옅은 배경 + 클릭 불가
*   필수 입력 항목 미입력 시: 에러 메시지 또는 하이라이트 제공 (정확한 UX는 추후 협의)
*   Select 컴포넌트: 기본 Placeholder, 옵션 선택 시 텍스트 변경
*   Currency 포맷: 다국가 화폐 기호 지원 (HKD, USD, CNY 등)
*   Timezone: 서버 시간 기준 (로컬 시간 vs UTC 정책 협의)

* * *
### 4.1 메인 POS 화면
#### 4.1.1 화면 정보
*   화면명: POS 메인 – 판매 화면
*   목적: 단일 주문에 대한 상품 추가/수정, 회원/프로모션 설정 및 결제 처리
*   접근 권한: Cashier, Store Manager
*   이전 화면: Day Open 완료 후 자동 진입
#### 4.1.2 상단 공통 영역

| 요소 | 설명 | 기능 정의 | 비고 |
| ---| ---| ---| --- |
| 로고(MISTO) | 좌상단 브랜드 로고 | 클릭 시 별도 기능 없음 (MVP) | 추후 홈 이동 등 가능 |
| 현재 일시 | 상단 중앙 표시 | 시스템 서버 시간 표시 (Read-only) | 타임존 정책 협의, 24시간 형식 |
| Day Open / Day Close / Daily Receipt 버튼 | 상단 중앙 버튼 3개 | 각 버튼 클릭 시 해당 팝업 호출 | 팝업은 4.6~4.10 참조 |
| Shop/매장 선택 드롭다운 | 우상단 | 현재 로그인 세션의 매장 정보 표시, (MVP 기준) 단일 매장만 선택 가능 | 멀티 매장 운영은 이후 버전, 주소 포함 표시 |
| User 정보 (USER 01) | 우상단 | 현재 로그인 사용자 이름 또는 코드 표시 | 클릭 시 마이페이지/로그아웃은 Scope Out, 드롭다운 메뉴 추가 가능 |
| 설정 아이콘 | 우상단 | (MVP) 동작 없음 또는 기본 설정 팝업 | 실제 구현 범위 협의 필요 (각종 설정 등) |
| Reset / View Orders | 상단 우측 | Reset: 현재 주문 초기화 (확인 다이얼로그 표시), View Orders: 주문 목록 팝업 호출 | View Orders 팝업은 4.7, Reset 전 경고 메시지 표시 필요 |

#### 4.1.3 Paper Bag 드롭다운 영역

| 요소 | 설명 | 기능 |
| ---| ---| --- |
| Paper Bag 버튼/드롭다운 | 아이콘 + 텍스트 | 클릭 시 드롭다운 메뉴 노출, Paper Bag S/M/L 등 빠른 추가 |
| Other 메뉴 | 추가 메뉴 아이콘 (...) | 자주 사용하는 다른 부가상품 관리 (정책 협의) |

#### 4.1.4 Products 영역 (상품 장바구니)
**목적**: 현재 주문에 포함된 상품 라인 관리

| 컬럼 | 설명 | 기능 정의 | 비고 |
| ---| ---| ---| --- |
| 라인 번호 | 1, 2, 3... | 자동 증가, 삭제 시 재정렬 | \- |
| Products | 상품명 | 상품 검색/선택 결과로 라인이 추가됨, 클릭 시 상품명 수정 가능 여부 협의 | 한글/영문 모두 지원 |
| Size | 사이즈 | 상품 옵션 정보 표시 (수정 불가 또는 드롭다운 여부는 정책 협의) | "Free" 등 기본값 표시 가능 |
| Color | 색상 | 동일 | "Black", "Blue" 등 표시 |
| QTY | 수량 | \- / + 버튼으로 증감, 직접 입력 가능 여부는 협의 | 최대값 제한 여부 협의 |
| Original Price | 정상가 | 상품 기본 가격 표시(편집 불가) | 상품 마스터에서 관리 |
| Selling Price | 판매가 | 할인/수정된 최종 단가, 특정 권한(Store Manager)에서만 수정 가능 | Cashier의 수정 권한 정책 협의 |
| Amount | 합계 | QTY × Selling Price 자동 계산 | 실시간 업데이트 |
| Promotion | 적용 프로모션명 | Promotion 영역에서 ON된 캠페인명 또는 라인별 프로모션 | "사은품", "Set 할인" 등 표시 |
| Markdown | 추가 할인정보 | 수동 Markdown 등이 있을 경우 표시 | "Set 할인", "직원할인" 등 |
| 삭제 아이콘 | 휴지통 아이콘 | 해당 상품 라인을 주문에서 제거 | 클릭 시 확인 다이얼로그 표시 여부 협의 |

**추가 기능 규칙**:
*   Product 검색: 상단 "Search Product" 입력 시 Product 팝업(4.5) 노출, 선택한 상품이 Products 그리드에 추가
*   Paper Bag 버튼/드롭다운(4.2)에 의해 특정 상품 빠른 추가 가능
*   동일 상품 재추가 시 QTY 증가 vs 새 라인 추가 정책 협의
*   라인별 색상 구분 (예: 2번 라인 핑크 강조) 여부 협의
#### 4.1.5 Members 영역
**목적**: 회원 검색 및 기본 정보 확인

| 요소 | 설명 | 기능 |
| ---| ---| --- |
| 검색 입력창 | 고객명 / 회원번호 / 전화번호 / 사번 | 텍스트 입력 후 돋보기 버튼 클릭 시 회원 검색 API 호출 |
| 검색 버튼 | 돋보기 아이콘 | 조건에 맞는 회원 1건 선택 또는 선택 팝업(추후) |
| 회원번호 | 자동 표시 | Read-only |
| 회원명 | 자동 표시 | Read-only |
| 회원등급 | VIP, MEMBER 등 | Read-only |
| 연락처 | 자동 표시 | Read-only |
| 임직원 사원판매 (토글) | ON/OFF | ON일 경우 임직원 전용 프로모션/한도 정책 적용 |
| 임직원 구매한도 | 잔여 한도 표시 | 임직원 사원판매 ON일 때만 표시, 색상 경고(주황/빨강) |
| Remove 버튼 | 회원 정보 제거 | 선택된 회원 초기화 |

**비즈니스 규칙**:
*   동일 전화번호에 여러 회원이 있는 경우 → 회원 선택 팝업 호출 여부 협의
*   임직원 구매한도 초과 시 결제 제한 또는 경고 메시지 처리 방식:
    *   옵션 1: 결제 차단 + Store Manager 승인 필요
    *   옵션 2: 경고 메시지만 표시 + 결제 진행
*   회원 정보 변경 시 실시간 반영 vs 주문 재검색 필요 여부 협의
#### 4.1.6 Promotion 영역
**목적**: 사전 정의된 금액/비율 할인 프로모션을 주문 단위로 ON/OFF

| 요소 | 설명 | 기능 |
| ---| ---| --- |
| 캠페인 리스트 | "100$ 이상 구매 시 5% 할인" 등 | 각 캠페인별 토글 ON/OFF, 조건 미충족 시 비활성화 |
| 토글 | 프로모션 적용 여부 | ON 시 Payment Summary의 Promotion/Discount에 반영 |
| 프로모션명 | 설명 텍스트 | 자동 생성 또는 상품 마스터에서 관리 |

**비즈니스 규칙**:
*   복수 프로모션 동시 적용 여부 (예: 5% + 7% 가능? or 상위 1개만?):
    *   옵션 1: 모두 중복 적용 (최소값 또는 최대값)
    *   옵션 2: 상위 1개만 적용
    *   옵션 3: 고객사 정책에 따라 설정 가능
*   회원/임직원 여부에 따라 적용 가능한 프로모션 필터링 여부
*   프로모션 조건 미충족 시 (예: 100$ 미만) 토글 비활성화
*   프로모션 적용 후 총액 변경 시 자동 해제 여부 협의
#### 4.1.7 Payment Summary & Payment Received
**목적**: 결제 전에 최종 금액 확인 및 결제 현황 표시

| 항목 | 설명 | 계산 방식 | 비고 |
| ---| ---| ---| --- |
| Sub Total | 상품 합계 | ∑(Amount) | Products 그리드의 Amount 합 |
| Shipping | 배송비 (Blue 테마에만 표시) | 고정값 또는 입력값 | MVP에서 0 또는 별도 입력 정책 필요 |
| Tax | 세금 금액 | Sub Total × Tax Rate | Tax 정책은 국가별 설정 (HKD 기준 협의) |
| Promotion | 프로모션으로 인한 할인 금액 | 자동 계산 | 여러 프로모션 적용 시 합산 |
| Discount | 추가 수동 할인 | 수동 입력 | 매니저 권한 가능 여부 협의 |
| Grand Total | 최종 결제 금액 | Sub Total + Shipping + Tax - Promotion - Discount | 굵은 텍스트, 강조 색상 |

**Payment Received 영역**:
*   결제 수단별 수령 금액 표시 (결제 완료 후 업데이트)
*   예: Card $100, Cash $200 등
*   다중 결제 시 누적 표시
#### 4.1.8 Select Payment & 하단 버튼

| 요소 | 기능 정의 | 비고 |
| ---| ---| --- |
| Cash / VISA / MASTER CARD / ALIPAY 버튼 | 선택한 결제 수단이 활성(색 강조) 상태로 표시, Pay 팝업에 결제수단 전달 | 각 버튼 클릭 시 선택 상태 toggle, 추후 다른 수단 추가 가능 |
| Pay : $XXX 버튼 | 현재 Grand Total 기준으로 Pay 팝업 호출, 버튼에 금액 표시 | 버튼 색상 강조 |
| Save 버튼 | 현재 주문을 "임시 저장" 상태로 저장 (결제 미완료) | View Orders에서 "임시 저장" 상태로 조회 가능, 복구/삭제 가능 |
| Print 버튼 | 결제 후 영수증 또는 주문표 출력 | 정확한 동작은 고객사와 협의 (영수증 vs 주문표) |

* * *
### 4.2 Paper Bag 빠른 선택 드롭다운
*   화면명: Quick Product Select
*   목적: 자주 사용하는 부가상품(예: 쇼핑백)을 빠르게 장바구니에 추가
**기능**:
*   드롭다운 클릭 시 다양한 Bag 옵션 목록 표시 (Paper Bag S/M/L 등)
*   항목 선택 시:
    *   해당 상품이 Products 그리드에 새 라인으로 추가
    *   기본 QTY는 1 (변경 가능)
**비즈니스 규칙**:
*   Bag 상품 코드/가격은 상품 마스터에서 관리
*   동일 주문 내 여러 개 추가 가능
*   "Other" 메뉴에서 추가 부가상품 선택 가능
*   드롭다운 메뉴 최대 5-7개 항목 권장
*   페이퍼 백 가격이 무료인지 유료인지에 따라 Products 영역에도 추가되어야 할지 논의
* * *
### 4.3 팝업 – Product Search
*   화면명: Product Search 팝업
*   목적: 상품 검색 후 POS Products 그리드에 선택 추가
**트리거**:
*   메인 화면 "Search Product" 입력창에서 텍스트 입력 후 돋보기 버튼 클릭
*   또는 상품명 입력 후 엔터 키
#### 4.3.1 입력 영역

| 필드 | 설명 | 기능 | 필수 여부 |
| ---| ---| ---| --- |
| Product | 상품명 검색 | 부분 일치 텍스트 검색 (자동 완성 추천 가능) | 선택 |
| Style Code | 스타일 코드 | 정확/부분 일치 검색 | 선택 |
| Description | 설명 | 상품 설명 키워드 검색 | 선택 |
| Category | 카테고리 | 드롭다운 또는 텍스트 입력 | 선택 |
| Search 버튼 | 검색 실행 | 입력 조건으로 상품 검색 API 호출 | \- |

#### 4.3.2 리스트 영역

| 컬럼 | 설명 | 기능 |
| ---| ---| --- |
| Products | 상품명 | 한글/영문 모두 표시 |
| Style Code | 스타일 코드 | 고유값 |
| Category | 카테고리 | 상품 분류 |
| Original Price | 정상가 | 소매가 |
| Selling Price | 판매가 | 기본 판매가 |
| Stock | 재고 수량 | 참고용, 재고 0일 때 선택 제한 여부는 협의 |
| Description | 설명 | 상품 상세 정보 |

#### 4.3.3 선택 및 추가 기능
*   행 클릭: 해당 상품 선택 (더블클릭 시 즉시 추가 vs 선택 후 "확인" 버튼 필요는 디자인에 따라 협의)
*   재고 0일 때: 선택 불가 처리 또는 경고 메시지 표시 (정책 협의)
*   검색 결과 없음: "검색 결과가 없습니다" 메시지 표시
*   페이지네이션: 결과가 많을 시 pagination 또는 무한 스크롤 지원
* * *
### 4.4 팝업 – View Orders
*   화면명: View Orders
*   목적: 날짜/회원/상태 등으로 주문 조회 및 후속 액션(환불, 복사, 삭제 등)
#### 4.4.1 검색 영역

| 필드 | 설명 | 기능 | 필수 여부 |
| ---| ---| ---| --- |
| Date (From ~ To) | 조회 기간 | 날짜 피커 사용, 오늘/어제/이번주 등 퀵셀 버튼 추가 가능 | 필수 또는 선택 (협의) |
| Members | 회원명/번호 검색 | 자동 완성 추천 | 선택 |
| Amount | 금액 조건 | 최소/최대 범위 입력 또는 단일 필드 | 선택 |
| Status | 상태 필터 | Dropdown: 결제완료/반품완료/임시저장 등 | 선택 |
| Cashier | 점원 이름/코드 | 드롭다운 또는 텍스트 입력 | 선택 |
| Search 버튼 | 검색 실행 | 입력 조건으로 주문 목록 API 호출 | \- |

#### 4.4.2 결과 리스트

| 컬럼 | 설명 | 기능 |
| ---| ---| --- |
| Date | 주문 발생 날짜 | YYYY-MM-DD 형식 |
| Time | 주문 발생 시간 | HH:MM:SS 형식 |
| Members | 회원명 (없을 수도 있음) | 비회원일 경우 "비회원" 표시 |
| Item Count | 라인 수 또는 수량 합 | 예: "4 items" 또는 "qty: 12" |
| Amount | 결제 금액 | Grand Total 표시 |
| Payment | 결제수단 | 단일 또는 복수 (예: "Cash", "Cash, Card") |
| Status | 상태 | 결제 완료 / 반품 완료 / 임시 저장 (색상 구분: 초록/빨강/회색) |
| Cashier | 담당 점원 | 점원 이름 또는 코드 |
| Action | 버튼 영역 | View / Refund / Copy / Remove 버튼 |

#### 4.4.3 액션별 기능

| 액션 | 설명 | 동작 |
| ---| ---| --- |
| View | 주문 상세 보기 | 동일 POS 화면에 주문 데이터 로드 또는 별도 Read-only 팝업 |
| Refund | 환불 프로세스 진입 | 환불 팝업 호출 (상세 정책 협의 필요) |
| Copy | 기존 주문을 복사하여 신규 주문 생성 | POS 화면으로 돌아가며 상품/회원/프로모션 정보 복사 |
| Remove | 임시 저장 상태 등 특정 조건에서만 삭제 가능 | 삭제 권한 정책 협의 (Cashier vs Store Manager) |

**비즈니스 규칙**:
*   결제 완료 상태: View, Refund, Copy 가능
*   임시 저장 상태: View, Copy, Remove 가능
*   반품 완료 상태: View만 가능 (읽기 전용)
*   목록에서 최대 100개까지 표시 후 페이지네이션 또는 스크롤 로드
*   조회 기간 기본값: 오늘 (또는 최근 30일로 협의)
* * *
### 4.5 팝업 – Pay
*   화면명: Pay
*   목적: 실제 받은 금액 입력 및 거스름돈 계산
*   트리거: 메인 화면에서 "Pay : $XXX" 버튼 클릭
#### 4.5.1 필드 정의

| 필드명 | 설명 | 타입 | 기능 | 비고 |
| ---| ---| ---| ---| --- |
| 받은금액 (상단, Read-only) | Grand Total 금액 | 텍스트 | 수정 불가, 결제 예정액 표시 | 예: "Grand Total: $300" |
| 받은금액 (입력) | 손님이 낸 금액 | Number Input | 숫자 입력, 다국가 화폐 포맷 처리 | 포커스 자동 진행, 음수 입력 불가 |
| 거스름돈 | Change 금액 | 텍스트 (Read-only) | 받은금액 - Grand Total 자동 계산 | 음수일 경우 "잔금 부족" 표시 |

#### 4.5.2 입력 검증
*   받은금액 < Grand Total: 에러 메시지 표시 "잔금이 부족합니다"
*   받은금액 = Grand Total: 거스름돈 $0 표시
*   받은금액 > Grand Total: 거스름돈 자동 계산, "Confirm" 버튼 활성화
#### 4.5.3 버튼

| 버튼 | 기능 |
| ---| --- |
| Cancel | 결제 프로세스 취소, POS 화면으로 복귀 (주문은 유지) |
| Confirm | Validation(받은금액 ≥ Grand Total) 통과 시 결제 완료, Payment Received 및 View Orders에 주문 저장 |

**비즈니스 규칙**:
*   결제 완료 시 주문 번호 생성 (자동 또는 고객사 정책)
*   결제 수단별 거스름돈 처리 (현금: 즉시, 카드: 자동 환급)
*   결제 수령 이력 저장 (감시 로그)
* * *
### 4.6 팝업 – Day Open
*   화면명: Day Open
*   목적: 영업 시작 시 결제수단별 시작 잔액 설정
*   트리거: 메인 화면 "Day Open" 버튼 클릭 (Day Open 전에만 노출 가능, 이미 완료 시 비활성화 또는 숨김)
#### 4.6.1 상단 정보

| 항목 | 설명 | 기능 |
| ---| ---| --- |
| Last Initialized Open Time | 가장 최근 Day Open 시각 | 참고용 Read-only (예: "2025-10-23 09:27:16") |
| Currency | 매장 화폐 단위 | Read-only (예: "HKD") |

#### 4.6.2 버튼

| 버튼 | 기능 |
| ---| --- |
| Load Previous Day Closing Balance | 전일 Day Close의 Closing Balance 값을 불러와 Amount에 자동 입력 |

#### 4.6.3 테이블: Payment Type / Amount

| 컬럼 | 설명 | 기능 |
| ---| ---| --- |
| # | 순번 | 1, 2, 3, 4... |
| Payment Type | 결제 수단명 | CASH, VISA, MASTER CARD, ALIPAY 등 (고정값) |
| Amount | 시작 잔액 | 수정 가능한 입력 필드, 기본값 0 또는 "Load..." 버튼으로 채워짐 |

#### 4.6.4 버튼

| 버튼 | 기능 |
| ---| --- |
| Cancel | 팝업 종료, 상태 변경 없음 (POS 화면 유지) |
| Confirm | 입력값 저장 후 해당 일자의 Day Open 완료 상태로 변경, 판매 기능 활성화 |

**비즈니스 규칙**:
*   하루에 Day Open은 1회만 허용 (추가 수정 여부는 고객사와 협의, 가능하다면 Store Manager만 가능)
*   Day Open 완료 전에는 판매 기능 제한 여부 결정 필요 (구현 권장)
*   이미 Day Open된 경우 "Day Open" 버튼 비활성화 + 팝업 대신 "Day Open 완료" 메시지 표시
* * *
### 4.7 팝업 – Day Close
*   화면명: Day Close
*   목적: 영업 종료 시 결제수단별 정산 및 마감
*   트리거: 메인 화면 "Day Close" 버튼 클릭 (Day Open 완료 후에만 활성화)
#### 4.7.1 상단 정보

| 항목 | 설명 | 기능 |
| ---| ---| --- |
| Day Close To | 마감 기준 시각 | Read-only, 현재 시간 자동 세팅 (예: "2025-10-23 17:00:00") |
| Currency | 화폐 단위 | Read-only (예: "HKD") |

#### 4.7.2 테이블: Payment Type별 정산

| 컬럼 | 설명 | 계산식 | 기능 |
| ---| ---| ---| --- |
| # | 순번 | \- | 1, 2, 3, 4... |
| Payment Type | 결제 수단명 | \- | CASH, VISA, MASTER CARD, ALIPAY 등 (고정값) |
| Day Open Amount | 개장 시 시작 잔액 | \- | Read-only, Day Open에서 입력한 값 |
| Amount Received | 영업 중 누적 수입 | 시스템 계산 값 | Read-only, 결제 완료 주문의 해당 결제수단 합계 |
| Total Amount | 예상 보유액 | Day Open Amount + Amount Received | Read-only, 시스템 자동 계산 |
| Closing Balance | 실제 카운트 입력값 | 사용자 입력 | 편집 가능, 실제 금전등록기 또는 현금 카운트 금액 입력 |
| Confirm | 마감 완료 체크 | \- | 체크박스, 모든 필드 입력 후 ON 가능 |

#### 4.7.3 추가 스펙 (선택사항, 고객사 요구 시)
*   Over/Short 계산: Total Amount와 Closing Balance의 차이를 자동 계산해 표시
    *   Over: Closing Balance > Total Amount (초과)
    *   Short: Closing Balance < Total Amount (부족)
    *   색상 경고 (빨강/주황)
#### 4.7.4 버튼

| 버튼 | 기능 |
| ---| --- |
| Cancel | 팝업 종료 (Day Close 미완료) |
| Proceed to Day Close | 모든 Payment Type에 대해 Confirm 체크가 완료된 경우에만 활성화, 클릭 시 Day Close 최종 완료 |

**비즈니스 규칙**:
*   모든 결제수단에 대해 Confirm 체크박스가 체크되어야만 "Proceed to Day Close" 활성화
*   Over/Short가 있을 경우:
    *   경영 기록용 로그에 저장 (추후 분석용)
    *   일정 금액 이상 Over/Short일 경우 Store Manager 승인 요청 (정책 협의)
*   Day Close 완료 후에는 다시 Day Open까지 판매 기능 사용 불가
* * *
### 4.8 팝업 – Daily Receipt
*   화면명: Daily Receipt
*   목적: 일일 영업 요약 영수증 출력
*   트리거: Day Close 완료 후 자동 표시 또는 메인 화면 "Daily Receipt" 버튼 클릭
#### 4.8.1 필드/기능

| 필드 | 설명 | 기능 | 예시 |
| ---| ---| ---| --- |
| Shop | 매장명 및 주소 | 자동 불러오기 | "(123456) MK KAI CHIU ROAD" |
| Title | 영수증 제목 | Read-only | "Daily Receipt" |
| Date | 해당 일자 | Read-only | "2025-10-23" |
| Language | 출력 언어 | Dropdown 선택 또는 자동 결정 | "English", "繁體中文", "简体中文" 등 |
| Print Time | 출력 시각 | 자동 세팅 | "2025-10-23 20:27:16" |

#### 4.8.2 요약 정보 (출력 시 포함될 내용, MVP 기준)
다음 정보는 팝업에서 Preview로 확인 가능하게 할지 협의:
*   점포명, 주소
*   영업일자
*   총 판매액 (Grand Total 합계)
*   결제수단별 매출
*   프로모션 할인액
*   Over/Short 금액 (있다면)
*   발주자, 인수자 서명 라인 (있다면)
#### 4.8.3 버튼

| 버튼 | 기능 |
| ---| --- |
| Cancel | 팝업 종료 (영수증 미출력) |
| Print | 프린터로 Daily Receipt 출력, 출력 완료 후 팝업 자동 종료 |

**비즈니스 규칙**:
*   Day Close 완료 이후에만 Daily Receipt 출력 가능 (필수 또는 선택 여부는 정책 협의)
*   출력 이력 저장 (출력 날짜/시간/사용자)
*   재출력 가능 여부 협의 (View Orders에서 조회 후 재출력)
*   다국어 지원 (영문, 중문 번체, 중문 간체 등)
* * *
### 4.9 환불 프로세스 (상세 정책 협의 필요)
*   화면명: Refund (별도 팝업 또는 화면)
*   목적: 기존 주문에 대한 환불 처리
*   트리거: View Orders 팝업에서 "Refund" 버튼 클릭
**현재 MVP 스코프 미확정 항목**:
1. 부분 환불 vs 전체 환불:
    *   옵션 A: 전체 환불만 가능
    *   옵션 B: 상품 라인별 부분 환불 가능
    *   옵션 C: 금액 입력으로 자유로운 환불액 설정
2. 환불 수수료 정책:
    *   수수료 없음?
    *   고정 수수료?
    *   비율 수수료?
3. 결제수단별 환불 처리:
    *   현금: 즉시 거래 (점원이 현금 반환)
    *   카드: 승인 취소 또는 환급 (카드사 처리)
    *   전자결제: 자동 환급 또는 수동 처리
4. 환불 가능 기간:
    *   제한 없음?
    *   N일 이내만 가능?
    *   시간 단위로 제한?
5. 환불 권한:
    *   Cashier가 자신의 주문만 환불 가능?
    *   Store Manager 승인 필요?
    *   일정 금액 이상은 매니저 승인?
정책 결정 후 상세 화면 정의 추가
* * *
## 5\. 추가 논의 사항 (고객사 협의 체크리스트)
### 5.1 기능 정책
*   **Promotion 중복 적용 정책** (상세 정책은 섹션 3.6 참조) - 아직 협의 필요
*   **임직원 구매한도 초과 시 처리**: 한도 구매금액만큼만 적용 (설정됨)
*   **Selling Price 수정 권한**: Store Manager만 수정 가능 (설정됨)
*   **환불 프로세스 상세 정책**: 섹션 3.3.2 참조 (부분/전체, 현금/카드/복합 결정됨)
*   **Day Open 재수정 가능 여부**: 1회만 허용, 추가 수정 불가 (설정됨)
*   **주문 초기화 전 확인 다이얼로그**: 필요 여부 협의 필요
*   **동일 상품 재추가**: QTY 증가 vs 새 라인 추가 정책 협의 필요
*   **마이너스 주문 처리**: 별도 데이터베이스에 기록되는지, Shopify 연동 여부 확인 필요
*   **SET 할인 정책** (상세정책): 별도 협의 필요
### 5.2 UI/UX 정책
*   **에러 메시지 방식**:
    *   **토스트 박스**: 경고/안내 메시지 (예: "상품이 추가되었습니다", "재고 부족")
    *   **얼럿 팝업**: 필수 작업 또는 확인 필요 (예: "정말 삭제하시겠습니까?", "결제 실패 - 다시 시도하세요")
    *   **필드 하이라이트**: 필수 필드 미입력 시 (빨간색 테두리 표시)
*   **Disabled 상태 표시 방식**: 회색/옅은 배경 + 커서 변경 (클릭 불가)
*   **언어 다국어 지원 목록**:
    *   영문 (English)
    *   중문 번체 (繁體中文)
    *   중문 간체 (简体中文)

**예상 오류 처리**:
*   **시스템 및 네트워크 오류**: 토스트 박스 + 재시도 버튼
*   **결제 및 하드웨어 오류**: 얼럿 팝업 + 고객센터 연락처
*   **입력 및 유효성 검증 오류**: 필드 하이라이트 + 필드 아래 에러 메시지
*   **비즈니스 로직 위반** (예: 한도 초과, 재고 부족): 토스트 박스 또는 얼럿 팝업
### 5.3 운영 정책
*   시스템 시간대 (UTC vs 로컬 시간)
*   결제수단 추가 가능 여부 (Apple Pay, Google Pay 등)
*   재고 0일 때 상품 판매 가능 여부
*   Day Open 전 판매 기능 제한 필요 여부
*   Over/Short 자동 승인 vs 수동 승인
*   보안 로그 저장 범위
### 5.4 성능 및 확장성
*   동시 사용 매장 수 (MVP 단일 매장)
*   일일 예상 주문 수
*   결제 처리 타임아웃 정책
*   시스템 및 네트워크 다운 시 오프라인 모드 지원 여부
### 5.5 향후 버전 계획
*   멀티 매장 지원 (v1.1)
*   포인트/쿠폰 시스템 (v1.2)
*   재고 자동 연동 (v2.0)
*   분석 대시보드 (v2.0)
*   모바일 앱 지원 (v2.0)
* * *
## 6. 용어 정의 (Glossary)

### 6.1 사용자 역할 (User Roles)

| 용어 | 영문 | 정의 |
|------|------|------|
| 점원 | Cashier | POS 시스템을 주로 사용하는 일선 판매 직원, 상품 판매/결제/환불 처리 담당 |
| 점장 | Store Manager | 매장 관리 및 일일 정산을 담당하는 관리자, 최종 승인 권한 보유 |

### 6.2 고객 관련 (Customer)

| 용어 | 영문 | 정의 |
|------|------|------|
| 회원 | Member | 회원가입 완료한 고객, 고유 회원번호 및 등급 정보 보유 |
| 비회원 | Non-member | 회원가입을 하지 않은 일반 고객 |
| 임직원 | Employee | 매장 소속 직원 (점원, 점장 등) |

### 6.3 거래 관련 (Transaction)

| 용어 | 영문 | 정의 |
|------|------|------|
| 주문 | Order | 고객이 상품을 구매하기 위한 거래 단위 |
| 결제 | Payment | 고객이 상품 대금을 지불하는 행위 |
| 거스름돈 | Change | 받은금액 - 결제액 (음수면 잔금 부족) |
| 환불 | Refund | 이미 결제 완료된 주문을 취소하고 금액을 반환하는 행위 |
| 임시 저장 | Temporary Save | 상품을 추가했으나 결제하지 않은 상태로 주문을 저장 |

### 6.4 할인 및 프로모션 (Discount & Promotion)

| 용어 | 영문 | 정의 |
|------|------|------|
| 프로모션 | Promotion | 판매 촉진을 위한 할인 캠페인 (상품할인, 멤버할인, 임직원할인 등) |
| 상품 프로모션 | Product Promotion | 특정 상품 또는 카테고리에 대한 할인 |
| 멤버십 프로모션 | Membership Promotion | 회원 등급별 할인 (예: VIP 회원 10% 할인) |
| 임직원 프로모션 | Employee Promotion | 임직원 전용 특별 할인 |
| 마크다운 | Markdown | 추가 수동 할인 (점원이나 매니저가 특별히 적용하는 할인) |
| SET 할인 | Set Discount | 특정 상품 조합 구매 시 적용되는 할인 |

### 6.5 결제 (Payment)

| 용어 | 영문 | 정의 |
|------|------|------|
| 결제수단 | Payment Method | 고객이 대금을 지불하는 방식 (현금, VISA, MASTER CARD, ALIPAY 등) |
| 단일 결제 | Single Payment | 하나의 결제수단으로만 지불 |
| 분할 결제 | Split Payment | 여러 결제수단을 조합하여 지불 (예: 현금 + 카드) |
| 수납금액 | Amount Received | 고객이 실제로 제시한 금액 |
| 결제액 | Payment Amount | 상품의 최종 결제 금액 (Grand Total) |

### 6.6 영업 일마감 (Daily Operation)

| 용어 | 영문 | 정의 |
|------|------|------|
| 개장 | Day Open | 영업을 시작하는 행위, 각 결제수단별 시작 잔액(Opening Balance) 설정 |
| 마감 | Day Close | 영업을 종료하는 행위, 각 결제수단별 실제 보유액(Closing Balance) 확인 및 정산 |
| 일일 영수증 | Daily Receipt | 하루 영업 요약 영수증 (판매액, 프로모션, Over/Short 등 기록) |
| 개장금액 | Opening Balance | Day Open 시 설정된 각 결제수단별 시작 잔액 |
| 마감금액 | Closing Balance | Day Close 시 각 결제수단별 실제 보유액 (현금 카운트 금액 등) |
| 수입액 | Amount Received | 영업 중 판매로 인해 발생한 수입 (Day Open Amount + Amount Received) |
| 초과 | Over | Closing Balance > Total Amount (실제 보유액이 예상 금액보다 많은 경우) |
| 부족 | Short | Closing Balance < Total Amount (실제 보유액이 예상 금액보다 적은 경우) |

### 6.7 재무 (Financial)

| 용어 | 영문 | 정의 |
|------|------|------|
| 정가 | Original Price | 상품의 기본 소매가 |
| 판매가 | Selling Price | 실제 고객에게 판매되는 가격 (할인 적용 후) |
| 소계 | Sub Total | 모든 상품의 판매가 합계 |
| 세금 | Tax | 판매액에 부과되는 세금 (국가/지역별 정책) |
| 배송비 | Shipping | 배송 관련 추가 비용 (Blue 테마에만 표시) |
| 할인 | Discount | 프로모션 또는 마크다운으로 인한 공제액 |
| 최종결제액 | Grand Total | 고객이 실제 지불해야 할 최종 금액 (Sub Total + Tax + Shipping - Discount) |
| 마이너스 거래 | Negative Transaction | 환불로 인한 음수 거래 (Shopify는 미지원, 별도 DB에 기록) |

### 6.8 상품 정보 (Product)

| 용어 | 영문 | 정의 |
|------|------|------|
| 상품 | Product | 판매되는 재화 (의류, 악세서리 등) |
| 스타일 코드 | Style Code | 상품의 고유 식별 코드 |
| 수량 | Quantity (QTY) | 주문 시 상품의 개수 |
| 사이즈 | Size | 상품의 규격 (S, M, L 등 또는 Free) |
| 색상 | Color | 상품의 색깔 (Black, Blue 등) |
| 재고 | Stock | 현재 보유 중인 상품의 수량 |

### 6.9 기타 (Miscellaneous)

| 용어 | 영문 | 정의 |
|------|------|------|
| 영수증번호 | Receipt Number | 주문 고유 번호, 환불/조회 시 사용 |
| 장바구니 | Shopping Cart / Products | POS에서 고객이 선택한 상품을 임시 보관하는 영역 |
| 페이퍼백 | Paper Bag | 상품 포장용 쇼핑백 (S/M/L 사이즈) |
| 부가상품 | Add-on Product | 주 상품 외 추가로 판매하는 상품 |

---

**END OF DOCUMENT**
